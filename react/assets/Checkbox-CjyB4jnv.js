import{j as n}from"./jsx-runtime-DF2Pcvd1.js";import{r as u}from"./index-B2-qRKKC.js";import{u as S}from"./Form-6r68mTog.js";import{c as O,P as y,a as H,b as N,d as $,e as G}from"./index-ChlNXIGl.js";import{P as K}from"./index-DnB962Pj.js";import{c as P}from"./cn-Dtjc6EhN.js";import{C as U}from"./check-CT2wzrsh.js";import{L as V}from"./Label-Dk0OgnlF.js";var R="Checkbox",[X,de]=O(R),[J,g]=X(R);function Q(e){const{__scopeCheckbox:o,checked:c,children:i,defaultChecked:r,disabled:t,form:h,name:p,onCheckedChange:d,required:m,value:b="on",internal_do_not_use_render:s}=e,[f,x]=H({prop:c,defaultProp:r??!1,onChange:d,caller:R}),[C,v]=u.useState(null),[E,a]=u.useState(null),l=u.useRef(!1),_=C?!!h||!!C.closest("form"):!0,j={checked:f,disabled:t,setChecked:x,control:C,setControl:v,name:p,form:h,value:b,hasConsumerStoppedPropagationRef:l,required:m,defaultChecked:k(r)?!1:r,isFormControl:_,bubbleInput:E,setBubbleInput:a};return n.jsx(J,{scope:o,...j,children:W(s)?s(j):i})}var w="CheckboxTrigger",B=u.forwardRef(({__scopeCheckbox:e,onKeyDown:o,onClick:c,...i},r)=>{const{control:t,value:h,disabled:p,checked:d,required:m,setControl:b,setChecked:s,hasConsumerStoppedPropagationRef:f,isFormControl:x,bubbleInput:C}=g(w,e),v=S(r,b),E=u.useRef(d);return u.useEffect(()=>{const a=t?.form;if(a){const l=()=>s(E.current);return a.addEventListener("reset",l),()=>a.removeEventListener("reset",l)}},[t,s]),n.jsx(y.button,{type:"button",role:"checkbox","aria-checked":k(d)?"mixed":d,"aria-required":m,"data-state":A(d),"data-disabled":p?"":void 0,disabled:p,value:h,...i,ref:v,onKeyDown:N(o,a=>{a.key==="Enter"&&a.preventDefault()}),onClick:N(c,a=>{s(l=>k(l)?!0:!l),C&&x&&(f.current=a.isPropagationStopped(),f.current||a.stopPropagation())})})});B.displayName=w;var L=u.forwardRef((e,o)=>{const{__scopeCheckbox:c,name:i,checked:r,defaultChecked:t,required:h,disabled:p,value:d,onCheckedChange:m,form:b,...s}=e;return n.jsx(Q,{__scopeCheckbox:c,checked:r,defaultChecked:t,disabled:p,required:h,onCheckedChange:m,name:i,form:b,value:d,internal_do_not_use_render:({isFormControl:f})=>n.jsxs(n.Fragment,{children:[n.jsx(B,{...s,ref:o,__scopeCheckbox:c}),f&&n.jsx(z,{__scopeCheckbox:c})]})})});L.displayName=R;var q="CheckboxIndicator",M=u.forwardRef((e,o)=>{const{__scopeCheckbox:c,forceMount:i,...r}=e,t=g(q,c);return n.jsx(K,{present:i||k(t.checked)||t.checked===!0,children:n.jsx(y.span,{"data-state":A(t.checked),"data-disabled":t.disabled?"":void 0,...r,ref:o,style:{pointerEvents:"none",...e.style}})})});M.displayName=q;var T="CheckboxBubbleInput",z=u.forwardRef(({__scopeCheckbox:e,...o},c)=>{const{control:i,hasConsumerStoppedPropagationRef:r,checked:t,defaultChecked:h,required:p,disabled:d,name:m,value:b,form:s,bubbleInput:f,setBubbleInput:x}=g(T,e),C=S(c,x),v=$(t),E=G(i);u.useEffect(()=>{const l=f;if(!l)return;const _=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(_,"checked").set,F=!r.current;if(v!==t&&I){const D=new Event("click",{bubbles:F});l.indeterminate=k(t),I.call(l,k(t)?!1:t),l.dispatchEvent(D)}},[f,v,t,r]);const a=u.useRef(k(t)?!1:t);return n.jsx(y.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??a.current,required:p,disabled:d,name:m,value:b,form:s,...o,tabIndex:-1,ref:C,style:{...o.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});z.displayName=T;function W(e){return typeof e=="function"}function k(e){return e==="indeterminate"}function A(e){return k(e)?"indeterminate":e?"checked":"unchecked"}function Y(e){const{size:o="md"}=e;return P("mild-checkbox",`mild-checkbox--${o}`)}function Z(e){const{size:o="md"}=e;return P("mild-checkbox-label",`mild-checkbox-label--${o}`)}const ee=u.forwardRef((e,o)=>{const{className:c,size:i="md",label:r,checked:t,defaultChecked:h,disabled:p,required:d,name:m,value:b,id:s,onCheckedChange:f,...x}=e;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(L,{ref:o,id:s,checked:t,defaultChecked:h,disabled:p,name:m,value:b,onCheckedChange:f,className:P(Y({size:i}),c),...x,children:n.jsx(M,{className:"flex items-center justify-center",children:n.jsx(U,{className:"h-4 w-4"})})}),r&&n.jsx(V,{htmlFor:s,className:P(Z({size:i})),required:d,children:r})]})});ee.displayName="Checkbox";export{ee as C};
